<div class="wgt wgt--flatland" data-widget="flatland-explorer">
  <!-- Combined canvas (top row) -->
  <div class="wgt__canvas flatland__views">
    <canvas data-role="views" width="640" height="360"></canvas>
  </div>

  <!-- Controls -->
  <div class="wgt__panel wgt__controls">
    <div class="wgt__title">Control</div>
    <div class="wgt__field">
      <div class="wgt__hint">Flip the curvature, then try the experiments below.</div>
    </div>

    <div class="wgt__field" role="radiogroup" aria-label="Geometry mode">
      <label>
        <input type="radio" name="flatland-mode" value="euclid" data-role="mode" checked>
        Euclidean: flat, infinite, triangles sum to 180 deg
      </label>
      <label>
        <input type="radio" name="flatland-mode" value="sphere" data-role="mode">
        Riemannian: sphere, triangles get fat
      </label>
    </div>

    <div class="wgt__field" role="group" aria-label="Choose experiment">
      <div class="wgt__row wgt__row--wrap">
        <button type="button" data-role="tool-line" class="wgt__btn--ghost">Draw a Line</button>
        <button type="button" data-role="tool-triangle" class="wgt__btn--ghost">Draw a Triangle</button>
        <button type="button" data-role="tool-walker" class="wgt__btn--ghost">Send "Johnny" the Walker</button>
      </div>
      <div class="wgt__hint" data-role="tool-hint">Select an experiment--each click resets its setup.</div>
    </div>

    <div class="wgt__field">
      <button type="button" data-role="reset-all" class="wgt__btn--ghost">Reset</button>
    </div>
  </div>

  <!-- Output narratives -->
  <div class="wgt__panel wgt__output" aria-live="polite">
    <div class="wgt__title">Result</div>
    <!-- Result panel: the JavaScript populates this template on demand so only
         the active experiment's copy is surfaced. -->
    <div class="wgt__field" data-role="result-block" hidden>
      <strong data-role="result-title"></strong>
      <div class="wgt__metric" data-role="triangle-metric" hidden>
        <strong>Angle Sum</strong> <span data-role="triangle-sum" class="wgt__out">--</span>
      </div>
      <div class="wgt__hint" data-role="result-text"></div>
    </div>
    <div class="wgt__field" data-role="narrative-block" hidden>
      <strong>Philosophical Payoff</strong>
      <div class="wgt__hint">Listen as the two perspectives narrate how geometry bends with space.</div>
      <div data-role="narrative" class="flatland__narrative wgt__out">
        Geometry feels like law to the Flatlander. From the shooter's perch, it's a convention tied to hidden curvature.
      </div>
    </div>
  </div>
</div>

<link rel="stylesheet" href="/css/widgets.css">
<script src="/js/widgets-core.js" defer></script>
<script src="/js/flatland.js" defer></script>
