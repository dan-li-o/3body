<div class="wgt wgt--flatland" data-widget="flatland-explorer">
  <!-- Combined canvas (top row) -->
  <div class="wgt__canvas flatland__views">
    <canvas data-role="views" width="640" height="360"></canvas>
  </div>

  <!-- Controls -->
  <div class="wgt__panel wgt__controls">
    <div class="wgt__title">Geometry Switchboard</div>
    <div class="wgt__field">
      <div class="wgt__hint">Flip the curvature, then try the experiments below.</div>
    </div>

    <div class="wgt__field" role="radiogroup" aria-label="Geometry mode">
      <label>
        <input type="radio" name="flatland-mode" value="euclid" data-role="mode" checked>
        Euclidean: flat, infinite, triangles sum to 180 deg
      </label>
      <label>
        <input type="radio" name="flatland-mode" value="sphere" data-role="mode">
        Riemannian: sphere, triangles get fat
      </label>
    </div>

    <div class="wgt__field" role="group" aria-label="Choose experiment">
      <div class="wgt__row wgt__row--wrap">
        <button type="button" data-role="tool-line" class="wgt__btn--ghost">Draw a Line</button>
        <button type="button" data-role="tool-triangle" class="wgt__btn--ghost">Draw a Triangle</button>
        <button type="button" data-role="tool-parallel" class="wgt__btn--ghost">Test Parallel Lines</button>
        <button type="button" data-role="tool-walker" class="wgt__btn--ghost">Send Walker</button>
      </div>
      <div class="wgt__hint" data-role="tool-hint">Select an experiment--each click resets its setup.</div>
    </div>

    <div class="wgt__field">
      <button type="button" data-role="reset-all" class="wgt__btn--ghost">Reset</button>
    </div>

    <div class="wgt__field" role="group" aria-label="Draw a line">
      <strong>Draw a Line</strong>
      <div class="wgt__hint">Drop two points in the shooter's view; we connect them by the shortest route.</div>
      <div class="wgt__hint" data-role="line-message"></div>
    </div>

    <div class="wgt__field" role="group" aria-label="Triangle experiment">
      <strong>Draw a Triangle</strong>
      <div class="wgt__hint">Tap three points in either view to plot vertices.</div>
      <div class="wgt__metric">
        <strong>Angle Sum</strong> <span data-role="triangle-sum" class="wgt__out">--</span>
      </div>
      <div class="wgt__hint" data-role="triangle-message"></div>
    </div>

    <div class="wgt__field" role="group" aria-label="Parallel lines test">
      <strong>Test Parallel Lines</strong>
      <div class="wgt__hint">Drop two geodesics from a point; toggle modes to see what happens.</div>
      <div class="wgt__metric">
        <strong>Status</strong> <span data-role="parallel-status" class="wgt__out">--</span>
      </div>
      <div class="wgt__hint" data-role="parallel-message"></div>
    </div>

    <div class="wgt__field" role="group" aria-label="Walker experiment">
      <strong>Send a Walker</strong>
      <div class="wgt__hint">Launch the walker straight ahead. Does it ever come home?</div>
      <div class="wgt__metric">
        <strong>Result</strong> <span data-role="walker-status" class="wgt__out">--</span>
      </div>
      <div class="wgt__hint" data-role="walker-message"></div>
    </div>
  </div>

  <!-- Output narratives -->
  <div class="wgt__panel wgt__output" aria-live="polite">
    <div class="wgt__title">Philosophical Payoff</div>
    <div class="wgt__field">
      <div class="wgt__hint">Listen as the two perspectives narrate how geometry bends with space.</div>
      <div data-role="narrative" class="flatland__narrative wgt__out">
        Geometry feels like law to the Flatlander. From the shooter's perch, it's a convention tied to hidden curvature.
      </div>
    </div>
    <div class="wgt__field">
      <div class="wgt__hint">Messages update as you run experiments--watch induction wobble.</div>
    </div>
  </div>
</div>

<link rel="stylesheet" href="/css/widgets.css">
<script src="/js/widgets-core.js" defer></script>
<script src="/js/flatland.js" defer></script>
